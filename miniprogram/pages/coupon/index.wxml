<view class="coupon">
  <view class="tabs">
    <view 
      class="tab-item {{activeTab === item.id ? 'active' : ''}}" 
      wx:for="{{tabs}}" 
      wx:key="id"
      data-id="{{item.id}}"
      bindtap="onTabClick"
    >
      <text>{{item.name}}</text>
    </view>
  </view>

  <view class="content">
    <view wx:if="{{loading}}" class="loading-wrapper">
      <text>加载中...</text>
    </view>

    <view wx:elif="{{activeTab === 0}}" class="coupon-list">
      <view 
        class="coupon-card {{item.received ? 'received' : ''}}" 
        wx:for="{{coupons}}" 
        wx:key="id"
      >
        <view class="coupon-left">
          <view class="amount-wrapper">
            <text class="amount">¥{{item.amount}}</text>
            <text class="condition">满¥{{item.min_amount}}可用</text>
          </view>
          <view class="name">{{item.name}}</view>
          <view class="time">{{item.start_time}} 至 {{item.end_time}}</view>
        </view>
        <view 
          class="coupon-right {{item.received ? 'disabled' : ''}}" 
          bindtap="onReceiveCoupon"
          data-id="{{item.id}}"
        >
          <text>{{item.received ? '已领取' : '立即领取'}}</text>
        </view>
      </view>
    </view>

    <view wx:elif="{{activeTab > 0}}" class="coupon-list">
      <view 
        class="coupon-card my-coupon" 
        wx:for="{{myCoupons}}" 
        wx:key="id"
      >
        <view class="coupon-left">
          <view class="amount-wrapper">
            <text class="amount">¥{{item.amount}}</text>
            <text class="condition">满¥{{item.min_amount}}可用</text>
          </view>
          <view class="name">{{item.name}}</view>
          <view class="time">{{item.start_time}} 至 {{item.end_time}}</view>
        </view>
        <view class="coupon-right" bindtap="onCouponUse">
          <text>去使用</text>
        </view>
      </view>
    </view>

    <view wx:else class="empty">
      <text>暂无优惠券</text>
    </view>
  </view>
</view>