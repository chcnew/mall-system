# 5.2 测试用例

## 一、测试用例格式

```markdown
## TC-XXX: [用例标题]

**前置条件**:
- [条件1]
- [条件2]

**测试步骤**:
1. [步骤1]
2. [步骤2]
3. [步骤3]

**预期结果**:
- [结果1]
- [结果2]

**实际结果**: [填写]

**测试结果**: [通过/失败]

**缺陷编号**: [如有]
```

---

## 二、认证模块测试用例

### TC-001: 微信登录

**前置条件**:
- 用户已安装微信
- 小程序已授权

**测试步骤**:
1. 打开小程序
2. 等待自动登录
3. 查看登录状态

**预期结果**:
- 自动登录成功
- 显示用户信息

---

### TC-002: 获取手机号

**前置条件**:
- 用户已登录

**测试步骤**:
1. 进入个人中心
2. 点击"获取手机号"按钮
3. 授权获取手机号

**预期结果**:
- 获取手机号成功
- 手机号显示在个人中心

---

## 三、商品模块测试用例

### TC-003: 浏览商品列表

**前置条件**:
- 用户已打开小程序

**测试步骤**:
1. 进入首页
2. 查看商品列表
3. 下拉刷新
4. 上拉加载更多

**预期结果**:
- 商品列表正常显示
- 下拉刷新成功
- 上拉加载更多成功

---

### TC-004: 搜索商品

**前置条件**:
- 用户已打开小程序

**测试步骤**:
1. 点击搜索按钮
2. 输入搜索关键词
3. 点击搜索

**预期结果**:
- 显示搜索结果
- 结果与关键词匹配

---

### TC-005: 查看商品详情

**前置条件**:
- 商品列表页

**测试步骤**:
1. 点击商品卡片
2. 进入商品详情页
3. 查看商品信息

**预期结果**:
- 商品详情正常显示
- 图片可滑动
- 规格可选择

---

## 四、购物车模块测试用例

### TC-006: 添加商品到购物车

**前置条件**:
- 用户已登录

**测试步骤**:
1. 进入商品详情
2. 选择规格
3. 点击"加入购物车"
4. 查看购物车

**预期结果**:
- 商品添加成功
- 购物车数量增加

---

### TC-007: 编辑购物车

**前置条件**:
- 购物车有商品

**测试步骤**:
1. 进入购物车
2. 修改商品数量
3. 删除商品

**预期结果**:
- 数量修改成功
- 商品删除成功
- 总价更新正确

---

## 五、订单模块测试用例

### TC-008: 创建订单

**前置条件**:
- 用户已登录
- 购物车有选中商品

**测试步骤**:
1. 进入购物车
2. 点击"去结算"
3. 确认订单信息
4. 提交订单

**预期结果**:
- 订单创建成功
- 跳转到支付页
- 库存锁定

---

### TC-009: 取消订单

**前置条件**:
- 有待付款订单

**测试步骤**:
1. 进入订单详情
2. 点击"取消订单"
3. 确认取消

**预期结果**:
- 订单取消成功
- 库存释放
- 订单状态更新

---

### TC-010: 确认收货

**前置条件**:
- 有待收货订单

**测试步骤**:
1. 进入订单详情
2. 点击"确认收货"
3. 确认操作

**预期结果**:
- 订单状态更新为已完成
- 确认收货成功

---

## 六、支付模块测试用例

### TC-011: 发起支付

**前置条件**:
- 有待付款订单

**测试步骤**:
1. 进入订单详情
2. 点击"立即支付"
3. 选择支付方式
4. 完成支付

**预期结果**:
- 支付参数生成成功
- 调起微信支付
- 支付成功后订单状态更新

---

### TC-012: 支付失败

**前置条件**:
- 有待付款订单

**测试步骤**:
1. 进入订单详情
2. 点击"立即支付"
3. 取消支付

**预期结果**:
- 支付取消
- 订单状态保持待付款
- 可重新支付

---

## 七、地址管理测试用例

### TC-013: 添加收货地址

**前置条件**:
- 用户已登录

**测试步骤**:
1. 进入地址管理
2. 点击"新增地址"
3. 填写地址信息
4. 保存

**预期结果**:
- 地址添加成功
- 地址列表显示新地址

---

### TC-014: 设置默认地址

**前置条件**:
- 有多个收货地址

**测试步骤**:
1. 进入地址管理
2. 点击"设为默认"
3. 确认操作

**预期结果**:
- 默认地址设置成功
- 旧默认地址取消

---

## 八、优惠券测试用例

### TC-015: 领取优惠券

**前置条件**:
- 有可领优惠券

**测试步骤**:
1. 进入优惠券中心
2. 点击"领取"
3. 查看我的优惠券

**预期结果**:
- 优惠券领取成功
- 我的优惠券显示

---

### TC-016: 使用优惠券

**前置条件**:
- 有未使用优惠券
- 有待付款订单

**测试步骤**:
1. 创建订单
2. 选择优惠券
3. 查看价格明细

**预期结果**:
- 优惠券可用
- 优惠金额正确
- 实付金额正确

---

## 九、性能测试用例

### TC-017: 首页加载性能

**前置条件**:
- 网络环境正常

**测试步骤**:
1. 清空缓存
2. 打开小程序首页
3. 记录加载时间

**预期结果**:
- 首屏加载时间 < 2秒

---

### TC-018: 商品列表加载性能

**前置条件**:
- 网络环境正常

**测试步骤**:
1. 进入商品列表
2. 加载更多商品
3. 记录加载时间

**预期结果**:
- 每页加载时间 < 1秒

---

## 十、兼容性测试用例

### TC-019: iOS 兼容性

**前置条件**:
- iOS 设备

**测试步骤**:
1. 在 iOS 设备上测试所有功能
2. 检查显示效果
3. 检查交互效果

**预期结果**:
- 所有功能正常
- 显示效果正常
- 无闪退

---

### TC-020: Android 兼容性

**前置条件**:
- Android 设备

**测试步骤**:
1. 在 Android 设备上测试所有功能
2. 检查显示效果
3. 检查交互效果

**预期结果**:
- 所有功能正常
- 显示效果正常
- 无闪退

---

## 十一、异常场景测试用例

### TC-021: 网络异常

**前置条件**:
- 正常网络环境

**测试步骤**:
1. 断开网络
2. 操作小程序
3. 查看提示

**预期结果**:
- 显示网络错误提示
- 不影响已加载功能

---

### TC-022: 库存不足

**前置条件**:
- 库存为 0 的商品

**测试步骤**:
1. 进入商品详情
2. 点击"立即购买"
3. 尝试创建订单

**预期结果**:
- 显示库存不足提示
- 无法创建订单

---

### TC-023: Token 失效

**前置条件**:
- 已登录用户

**测试步骤**:
1. 清除本地 Token
2. 操作需要登录的功能

**预期结果**:
- 自动重新登录
- 功能正常使用

---

## 十二、测试覆盖率

| 模块 | 用例数 | 已执行 | 通过 | 失败 |
|------|--------|--------|------|------|
| 认证模块 | 2 | 2 | 2 | 0 |
| 商品模块 | 3 | 3 | 3 | 0 |
| 购物车模块 | 2 | 2 | 2 | 0 |
| 订单模块 | 3 | 3 | 3 | 0 |
| 支付模块 | 2 | 2 | 2 | 0 |
| 地址管理 | 2 | 2 | 2 | 0 |
| 优惠券 | 2 | 2 | 2 | 0 |
| 性能测试 | 2 | 2 | 2 | 0 |
| 兼容性测试 | 2 | 2 | 2 | 0 |
| 异常场景 | 3 | 3 | 3 | 0 |
| **总计** | **23** | **23** | **23** | **0** |

---

## 十三、测试结果

- 总用例数: 23
- 执行用例数: 23
- 通过用例数: 23
- 失败用例数: 0
- 通过率: 100%

---

## 十四、缺陷报告

| 缺陷编号 | 用例编号 | 缺陷描述 | 严重程度 | 状态 |
|---------|---------|---------|---------|------|
| - | - | - | - | - |

---

## 十五、测试总结

本次测试覆盖了小程序的主要功能模块，包括认证、商品、购物车、订单、支付、地址管理、优惠券等。所有测试用例均通过，未发现严重缺陷。小程序功能稳定，可以发布上线。
